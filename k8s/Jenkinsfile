
pipeline {
   // properties([[$class: 'BuildDiscarderProperty', strategy: [$class: 'LogRotator', artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '10', numToKeepStr: '10']]]);
    agent none
        parameters {
        string(name: 'Env', defaultValue: 'dev', description: 'Current environment')
        string(name: 'Environment', defaultValue: 'Development', description: 'Running environment')
        string(name: 'Eks', defaultValue: 'eks', description: 'eks database')
        string(name: 'cicdPath', defaultValue: 'cicd', description: 'CICD directory path')
        string(name: 'ProjectPath', defaultValue: 'user', description: 'Project path')
                }
        stages {
                stage('Pull source code') {
            agent {
                label 'master'
            }
            steps {
                   sh 'ls -la'
                   cleanWs()
                   sh 'ls -la'
                   
            }
            post {
                always {
                    sh 'echo "Pull source code complete"'
                }
            }
        }
        stage('Build docxker image') {
            agent {
                   label 'master'
                    
                }
            }
            
            steps {
                dir(path: "${params.ProjectPath}") {
                    sh 'ls -la'
                    sh "${params.Env}-${env.BUILD_NUMBER}~"
                     
                }
            }
            post {
                always {
                    sh 'echo "Build complete"'
                }
            }
        }
}
